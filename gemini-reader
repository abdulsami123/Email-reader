import json
import os
from pathlib import Path
import google.generativeai as genai
import reader
import util

def load_api_key():
    try:
        with open(Path(__file__).parent / "gemini-api-key.json") as f:
            os.environ["api-key"] = json.load(f)["api-key"]
    except (FileNotFoundError, KeyError, json.JSONDecodeError) as e:
        print(f"Error loading API key: {e}")

load_api_key()


genai.configure(api_key=os.environ["api-key"])

model = genai.GenerativeModel("gemini-1.5-flash")
text = reader.main()

response = model.generate_content(f"summarise the following text {text}")
util.read_out_loud(response.text)
print(response.text)
